var N=[],O=[],i,v=s=d=0,h=c.height=200,w=c.width=400,y=g=h/2,f="fillStyle",r=Math.random,p="ǂ",q="♥",j='#fff',m='red',z=e=3,S=function(A){a.font="bold "+A+"px arial"},L=function(A,B,C,D,E,F){c.width=w;a[f]='#300';a.fc(0,0,w,h);D=w/z;for(A=0;A<D*2;A++)B=(A>=D)?2:1,C=z*A-w*(B-1)-z,E=a.cL(-C,-80,w+50,h+50),E.a=E.addColorStop,E.a(0,(B>1)?'#966':'#633'),E.a(1,'#000'),a[f]=E,a.fc(C,h,z,(-N[A]-120/B)),N[A]=N[A+B]||0|r()*35;A=O.length;while(A--){S(35);if(B=O[A]){E=B[0]-=e;F=B[1];C=B[2];a[f]=(C==p)?j:m;a.fx(C,E,F);if(E>15&&E<40&&y-22<F&&y+28>F)(C==p)?g=1:s++,B[1]=0}}E=25,F=15;(v>0)?((y>E)?y-=v-=.8:v-=3):(y<h)?y+=2:g=1;if(d%240==0)e++;if(d%(0|200/e)==0)O.push([w,0|r()*(h*.9)+E,(0|r()*2)?q:p]);S(F);a[f]=j;a.fx(s+q,w*.6,F);a.fx(d+'m',w*.7,F);if(g==1)clearInterval(t),a.fx('='+(d*s),w*.6,h-F),a[f]=m;d++;a.ta(0,y);a.rotate(.1);S(E);a.fx("C",E,-F);a.fx("U",E,0);a.fx("P",E,F);a.fx("I",36,F);a.fx("D",F,0)};for(i in a)a[i[0]+i[6]]=a[i];b.onkeypress=function(){if(v<8)v+=3;if(g>0)O=[],e=3,y=h/2,s=d=g=0,t=setInterval(L,33)};L()